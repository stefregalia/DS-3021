---
title: "dplyr_Lab_Assignment"
author: "Brian Wright"
date: "2/9/2020"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```


################## AND NOW THE EXCITEMENT BEGINS! DPLYR AND TIDYVERSE PRACTICE 

## As a reminder five key dplyr functions that allow you to solve "the vast majority of your data-manipulation
## challenges" are:

## 1) filter() -- Pick observations by their values
## 2) arrage() -- Reorder the rows
## 3) select() -- Pick variables by their names
## 4) mutate() -- Create new variables with functions of existing variables
## 5) summarize() -- Collapse many values down to a single summary
## Bonus: group_by -- we can use this in combination with any of the five to change the scope of
## each function from operating on the entire dataset to operating on it group-by-group.


## For this assignment you can use any or all of the datasets I provided or choose three of your own!  I would like you to compose a question for each dataset that requires at a minumum three "levels" of pseudocode and use dplyr to solve the statements. Also create functions for each of your  questions.  Information or the actual data for the datasets can be found through the links below.  



# beaches data is in the working directory 

# nf2008_fg: http://users.stat.ufl.edu/~winner/data/nfl2008_fga.txt

# red_wine_quality: https://data.world/uci/wine-quality


# Lets walk through a example. Below is a dataset on students admitted to a graduate program in Data Science (actually don't remember where this data came from). 

## Are there differences in the admitted number of students on average by GPA and school rank?

  >A easy way to handle this is to identify function calls starting at the end of the question and working backwards. 

## Pseudocode 
  - Group by school rank
  - Calculate GPA Average
  - Count total admitted (Not totally necessary)
  - Calculate % Admitted


```{r}
admit_2 <- read_csv("data/LogReg.csv")

str(admit)

names <- c("admit","rank")
admit_2[,names] <- lapply(admit_2[,names],factor)

str(admit)
sum(as.numeric(admit$admit))

(admit_1 <- group_by(admit_2, rank)%>%
  summarize(count=n(),ave=mean(as.integer(admit)-1),mean(gpa)))

View(admit)

```

## Now just turn it into a function, so if you needed to repeat this data request on future datasets it would be simple. 
```{r}
ave_admit <- function(x){
  xx <- group_by(x, rank)%>%
  summarize(count=n(), admit_perc=mean(admit), mean(gpa))
  print(xx)
}

ave_admit(admit)



```

```{r}
wine <- read_csv("winequality-red-ddl.csv",col_names = TRUE)
str(wine)
```


```{r, echo=TRUE}

beaches <- read_csv("beaches.csv",col_names = TRUE)
View(beaches)
```


```{r}
# Pseudocode


```

```{r}
# Line by line operations


```

```{r}
# Function

```



























































```{r}

beaches <- xx %>% 
  group_by(season) %>% 
  sum(as.numeric(rainfall))

sum(xx$rainfall, na.rm = TRUE)
is.na(xx$rainfall)


head(xx)

```

